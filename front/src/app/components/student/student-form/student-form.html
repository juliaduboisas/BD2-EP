<div class="container card">
	<div class="page-header">
		<a routerLink="/">
			<img src="assets/icons/icon-home.png" alt="Ícone Home" class="icon">
		</a>
		<a routerLink="/students"><h1>/ Alunos</h1></a>
		<h1>/ {{ isEditMode ? 'Editar Aluno' : 'Adicionar Novo Aluno' }}</h1>
	</div>
    <div class="form-actions-top">
        <button type="button" class="btn btn-secondary" (click)="cancel()">Voltar</button>
    </div>

	<form [formGroup]="studentForm" (ngSubmit)="onSubmit()" class="form-card">
        <div class="form-group">
            <label for="cpf" class="form-label">CPF:</label>
            <input type="text" id="cpf" formControlName="cpf" class="form-control" [class.is-invalid]="studentForm.get('cpf')?.invalid && studentForm.get('cpf')?.touched">
            <div *ngIf="studentForm.get('cpf')?.invalid && studentForm.get('cpf')?.touched" class="error-message">
                CPF é obrigatório e deve ter 11 dígitos.
            </div>
        </div>
        <div class="form-group">
            <label for="nome" class="form-label">Nome:</label>
            <input type="text" id="nome" formControlName="nome" class="form-control" [class.is-invalid]="studentForm.get('nome')?.invalid && studentForm.get('nome')?.touched">
            <div *ngIf="studentForm.get('nome')?.invalid && studentForm.get('nome')?.touched" class="error-message">
                Nome é obrigatório.
            </div>
        </div>
        <div class="form-group">
            <label for="genero" class="form-label">Gênero:</label>
            <select id="genero" formControlName="genero" class="form-select" [class.is-invalid]="studentForm.get('genero')?.invalid && studentForm.get('genero')?.touched">
                <option value="">Selecione</option>
                <option value="M">Masculino</option>
                <option value="F">Feminino</option>
                <option value="O">Outro</option>
                <option value="N">Não informado</option>
            </select>
            <div *ngIf="studentForm.get('genero')?.invalid && studentForm.get('genero')?.touched" class="error-message">
                Gênero é obrigatório.
            </div>
        </div>
        <div class="form-group">
            <label for="dataNasc" class="form-label">Data de Nascimento:</label>
            <input type="date" id="dataNasc" formControlName="dataNasc" class="form-control" [class.is-invalid]="studentForm.get('dataNasc')?.invalid && studentForm.get('dataNasc')?.touched">
            <div *ngIf="studentForm.get('dataNasc')?.invalid && studentForm.get('dataNasc')?.touched" class="error-message">
                Data de Nascimento é obrigatória.
            </div>
        </div>
        <div class="form-group">
            <label for="email" class="form-label">Email:</label>
            <input type="email" id="email" formControlName="email" class="form-control" [class.is-invalid]="studentForm.get('email')?.invalid && studentForm.get('email')?.touched">
            <div *ngIf="studentForm.get('email')?.invalid && studentForm.get('email')?.touched" class="error-message">
                Email é obrigatório e deve ser um email válido.
            </div>
        </div>
        <button type="submit" class="btn btn-success" [disabled]="studentForm.invalid">
          {{ isEditMode ? 'Salvar Alterações' : 'Adicionar' }}
        </button>
	</form>
</div>